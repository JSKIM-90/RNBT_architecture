<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StatsCards Component Preview</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f1f5f9;
            padding: 2rem;
        }

        /* Container: Figma ÏÑ†ÌÉù ÏöîÏÜå ÌÅ¨Í∏∞ */
        #component-container {
            width: 100%;
            max-width: 900px;
            height: 180px;
            margin: 0 auto;
        }
    </style>
    <link rel="stylesheet" href="styles/component.css">
</head>
<body>
    <!-- Component Container -->
    <div id="component-container">
        <div class="stats-panel">
            <!-- Header -->
            <div class="panel-header">
                <h3 class="panel-title">Dashboard Overview</h3>
            </div>

            <!-- Stats Grid (Dynamic) -->
            <div class="stats-grid"></div>

            <!-- Templates -->
            <template id="stat-card-template">
                <div class="stat-card" data-stat-key="">
                    <div class="stat-header">
                        <span class="stat-icon"></span>
                        <span class="stat-change"></span>
                    </div>
                    <div class="stat-body">
                        <span class="stat-value"></span>
                        <span class="stat-label"></span>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <!-- Mock Data -->
    <script>
        const MOCK_DATA = {
            stats: {
                success: true,
                data: {
                    revenue: { value: 125430, change: 5.2, unit: '$' },
                    orders: { value: 1420, change: -1.3, unit: '' },
                    customers: { value: 890, change: 3.8, unit: '' },
                    conversion: { value: 3.2, change: 0.5, unit: '%' }
                }
            }
        };
    </script>

    <!-- Render Functions (from scripts/register.js) -->
    <script>
        const container = document.getElementById('component-container');

        // Summary Config Ìå®ÌÑ¥
        const config = [
            { key: 'revenue', label: 'Revenue', icon: 'üí∞', format: (v, unit) => `${unit}${v.toLocaleString()}` },
            { key: 'orders', label: 'Orders', icon: 'üì¶', format: (v) => v.toLocaleString() },
            { key: 'customers', label: 'Customers', icon: 'üë•', format: (v) => v.toLocaleString() },
            { key: 'conversion', label: 'Conversion', icon: 'üìà', format: (v, unit) => `${v}${unit}` }
        ];

        function renderStats(config, { response }) {
            const { data } = response;
            if (!data) return;

            const template = container.querySelector('#stat-card-template');
            const grid = container.querySelector('.stats-grid');

            if (!template || !grid) return;

            grid.innerHTML = '';

            config.forEach(({ key, label, icon, format }) => {
                const stat = data[key];
                if (!stat) return;

                const clone = template.content.cloneNode(true);
                const card = clone.querySelector('.stat-card');
                const iconEl = clone.querySelector('.stat-icon');
                const labelEl = clone.querySelector('.stat-label');
                const valueEl = clone.querySelector('.stat-value');
                const changeEl = clone.querySelector('.stat-change');

                card.dataset.statKey = key;
                iconEl.textContent = icon;
                labelEl.textContent = label;
                valueEl.textContent = format(stat.value, stat.unit);

                const changeValue = stat.change;
                const isPositive = changeValue >= 0;
                changeEl.textContent = `${isPositive ? '+' : ''}${changeValue}%`;
                changeEl.classList.add(isPositive ? 'positive' : 'negative');

                // Ïπ¥Îìú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
                card.addEventListener('click', () => {
                    console.log('[Page] Card clicked:', key);
                });

                grid.appendChild(clone);
            });

            console.log('[StatsCards] Stats rendered');
        }

        // Execute rendering
        renderStats(config, MOCK_DATA.stats);
    </script>
</body>
</html>
