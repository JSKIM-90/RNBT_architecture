<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar Component Preview</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f1f5f9;
        }

        /* Container: Figma ì„ íƒ ìš”ì†Œ í¬ê¸° */
        #component-container {
            position: fixed;
            top: 60px;
            left: 0;
            width: 240px;
            height: calc(100vh - 60px);
        }
    </style>
    <link rel="stylesheet" href="styles/component.css">
</head>
<body>
    <!-- Component Container -->
    <div id="component-container">
        <div class="sidebar">
            <!-- Header -->
            <div class="sidebar-header">
                <h3 class="sidebar-title">Navigation</h3>
            </div>

            <!-- Navigation Menu (Dynamic) -->
            <nav class="sidebar-nav">
                <ul class="nav-list"></ul>
            </nav>

            <!-- Templates -->
            <template id="nav-item-template">
                <li class="nav-item" data-menu-id="">
                    <span class="nav-icon"></span>
                    <span class="nav-label"></span>
                </li>
            </template>
        </div>
    </div>

    <!-- Mock Data -->
    <script>
        const MOCK_DATA = {
            menuList: {
                success: true,
                items: [
                    { id: 'dashboard', label: 'Dashboard', icon: 'home', active: true },
                    { id: 'analytics', label: 'Analytics', icon: 'chart', active: false },
                    { id: 'reports', label: 'Reports', icon: 'document', active: false },
                    { id: 'settings', label: 'Settings', icon: 'gear', active: false }
                ]
            }
        };
    </script>

    <!-- Render Functions (from scripts/register.js) -->
    <script>
        const container = document.getElementById('component-container');

        const iconMap = {
            home: 'ğŸ ',
            chart: 'ğŸ“Š',
            document: 'ğŸ“„',
            gear: 'âš™ï¸'
        };

        function renderMenu(response) {
            const { items } = response;
            if (!items || !Array.isArray(items)) return;

            const template = container.querySelector('#nav-item-template');
            const navList = container.querySelector('.nav-list');

            if (!template || !navList) return;

            navList.innerHTML = '';

            items.forEach(item => {
                const clone = template.content.cloneNode(true);
                const navItem = clone.querySelector('.nav-item');
                const icon = clone.querySelector('.nav-icon');
                const label = clone.querySelector('.nav-label');

                navItem.dataset.menuId = item.id;
                if (item.active) {
                    navItem.classList.add('active');
                }

                icon.textContent = iconMap[item.icon] || 'ğŸ“';
                label.textContent = item.label;

                // í˜ì´ì§€ ì´ë™ ì´ë²¤íŠ¸ (ì½˜ì†” ì¶œë ¥)
                navItem.addEventListener('click', () => {
                    console.log(`[Master] í˜ì´ì§€ê°€ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤: ${item.id}`);
                });

                navList.appendChild(clone);
            });

            console.log('[Sidebar] Menu rendered:', items.length, 'items');
        }

        // Execute rendering
        renderMenu(MOCK_DATA.menuList);
    </script>
</body>
</html>
