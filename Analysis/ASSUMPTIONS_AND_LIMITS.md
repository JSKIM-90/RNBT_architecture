# 전제와 한계 (Assumptions and Limits)

본 문서는 런타임 프레임워크 아키텍처의 설계 전제와 경계를 명시합니다.

---

## 전제 (Assumptions)

### 타겟 사용자

| 항목 | 전제 |
|------|------|
| 사용자 | 개발자 |
| 이유 | 동작 정의는 결국 코드 작업이 필요함 |

### 데이터 흐름

| 항목 | 전제 |
|------|------|
| 읽기/쓰기 | 읽기 전용 대시보드 |
| 데이터 입력 | 외부 시스템 책임 (ERP, MES, IoT 플랫폼 등) |
| 갱신 방식 | 폴링 기반 |

```
사용자 수정 → 외부 시스템 → 데이터 소스 갱신 → API 폴링 → 대시보드 반영
```

### 자산 배치 워크플로우

| 항목 | 전제 |
|------|------|
| 배치 방식 | 에디터에서 수동 배치 (드래그앤드롭) |
| 자산 식별 | `this.asset = 'assetID'` 코드 한 줄로 라벨링 |
| 좌표 관리 | 별도 좌표 데이터화 불필요 |

**수동 배치를 선택한 이유**:
- 좌표 추출 → 데이터화 → API 설계 → 동적 로드 로직 구축 비용
- vs 드래그앤드롭으로 즉시 배치
- 변동이 적은 자산(랙실장 등)에는 수동 배치가 더 빠름

**라벨링은 배치의 일부**:
- 수동 배치 워크플로우: 드래그앤드롭 → 위치 확정 → 라벨 붙이기
- 별도 추가 작업이 아닌 자연스러운 흐름

### 자산과 컴포넌트 관계

**핵심 원칙**: 자산 ≠ 컴포넌트

| 조건 | 관계 | 예시 |
|------|------|------|
| 물리적 좌표 필요 | 1 자산 = 1 컴포넌트 | 랙, 설비, 3D 배치 센서 |
| 물리적 좌표 불필요 | N 자산 = 1 컴포넌트 | 센서 목록, CPU 그룹, 서버 목록 |

**판단 기준**:
```
"이 자산이 화면의 특정 좌표에 있어야 하는가?"

→ Yes: 수동 배치 (1:1)
→ No: 테이블 패턴 (N:1, 일괄 조회 + 동적 렌더링)
```

**N:1 패턴 (테이블 패턴)**:
- 자산별 데이터가 있어도 물리적 배치가 불필요하면 일괄 조회
- 컴포넌트 하나가 N개 자산 데이터를 구독하여 렌더링
- 페이지네이션도 동일 패턴 (`fetchAndPublish` param 병합으로 구현)

```javascript
// N:1 패턴 예시
this.subscriptions = { sensorsData: ['renderData'] };

function renderData(response) {
    const { data } = response;
    data.forEach(sensor => renderRow(sensor));  // 테이블과 동일
}
```

### 시각화 수준

| 대상 | 방식 | 이유 |
|------|------|------|
| 랙, 설비 등 외곽 자산 | 3D 모델 배치 | 물리적 위치가 중요 |
| 랙 내부 아이템 | 테이블 목록 | "뭐가 있는지"가 중요, 정확한 위치는 불필요 |

---

## 설계 검토 완료 항목

| 주장 | 검토 내용 | 결과 |
|------|----------|------|
| 폴링 + 읽기 전용 대시보드 커버 | GlobalDataPublisher + 다중 interval | ✅ 설계 검토 완료 |
| 정형화된 틀로 컴포넌트 추가 용이 | 스캐폴드 코드 존재 | ✅ 설계 검토 완료 |
| 수동 배치가 좌표 추출보다 빠름 | 좌표 데이터화 비용 vs 드래그앤드롭 | ✅ 설계 검토 완료 |
| 라벨링은 배치의 일부 | 수동 배치 워크플로우에서 자연스러움 | ✅ 설계 검토 완료 |
| 테이블로 랙 내부 관리 충분 | 위치보다 존재 여부가 중요 | ✅ 설계 검토 완료 |
| 자산 ≠ 컴포넌트 | 물리적 좌표 유무로 1:1 vs N:1 결정 | ✅ 설계 검토 완료 |
| N:1 패턴 = 테이블 패턴 | 일괄 조회 + 동적 렌더링, 페이지네이션 포함 | ✅ 설계 검토 완료 |

---

## 한계 (Limits) - 열린 질문

현재 해결할 문제가 아니라, 필요할 때 확장할 영역입니다.

### 규모 한계

| 질문 | 현재 상태 | 확장 필요 시점 |
|------|----------|--------------|
| 자산 500개 이상일 때도 수동 배치 유지할 것인가? | 수동 배치 | CSV 임포트, 동적 생성 고려 |

### 변경 빈도

| 질문 | 현재 상태 | 확장 필요 시점 |
|------|----------|--------------|
| 레이아웃 변경 시 재배치 비용은 수용 가능한가? | 수용 가능 (변동 적음) | 빈번한 재배치 요구 시 |

### 쓰기 기능

| 질문 | 현재 상태 | 확장 필요 시점 |
|------|----------|--------------|
| 아키텍처 내에서 쓰기가 필요하면 어떻게 확장할 것인가? | 외부 시스템 위임 | 대시보드에서 직접 수정 요구 시 |

### 실시간 푸시

| 질문 | 현재 상태 | 확장 필요 시점 |
|------|----------|--------------|
| WebSocket 기반 실시간 푸시가 필요한가? | 폴링만 지원 | 폴링으로 부족한 실시간성 요구 시 |

---

## 결론

**현재 스코프 내에서 아키텍처는 견고합니다.**

위 한계들은 미리 설계하면 과잉 엔지니어링입니다. 필요할 때 확장하는 것이 적절합니다.

---

## 버전 정보

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.1.0 | 2025-12-08 | 자산과 컴포넌트 관계 섹션 추가 (1:1 vs N:1 패턴) |
| 1.0.0 | 2025-12-04 | 초기 작성 |
